<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>

    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/jquery.weekcalendar.css">
    <link rel="stylesheet" href="css/simplex.css">

    <link rel="stylesheet" href="css/app.css">

 <!--  <script src="js/jquery-2.1.1.min.js"></script> -->
    <script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js'></script>
    <script src="js/jquery-ui-1.8rc3.custom.min.js"></script>
    <script src="js/jquery.weekcalendar.js"></script>
    <script src="js/jquery.storageapi.min.js"></script>
    <script type='text/javascript'>

        var eventTest = [];

        var eventsSession = $.sessionStorage.get("events");
        if(eventsSession != null){
            eventsSession.forEach(function(event){
                var eventObj = {};
                eventObj["id"] = event.eventid;
                eventObj["start"] = new Date(event.strDateStart);
                eventObj["end"] = new Date(event.strDateEnd)
                eventObj["title"] = event.title;
                eventTest.push(eventObj);
            });
        }



        $(document).ready(function() {

            $('#calendar').weekCalendar({
                timeslotsPerHour: 4,
                height: function($calendar){
                    return $(window).height() - $("h1").outerHeight();
                },
                eventRender : function(calEvent, $event) {
                    if(calEvent.end.getTime() < new Date().getTime()) {
                        $event.css("backgroundColor", "#aaa");
                        $event.find(".time").css({"backgroundColor": "#999", "border":"1px solid #888"});
                    }
                },
                eventNew : function(calEvent, $event) {
                    displayMessage("<strong>Added event</strong><br/>Start: " + calEvent.start + "<br/>End: " + calEvent.end);
                    alert("You've added a new event. You would capture this event, add the logic for creating a new event with your own fields, data and whatever backend persistence you require.");
                },
                eventDrop : function(calEvent, $event) {
                    displayMessage("<strong>Moved Event</strong><br/>Start: " + calEvent.start + "<br/>End: " + calEvent.end);
                },
                eventResize : function(calEvent, $event) {
                    displayMessage("<strong>Resized Event</strong><br/>Start: " + calEvent.start + "<br/>End: " + calEvent.end);
                },
                eventClick : function(calEvent, $event) {
                    displayMessage("<strong>Clicked Event</strong><br/>Start: " + calEvent.start + "<br/>End: " + calEvent.end);
                },
                eventMouseover : function(calEvent, $event) {
                    displayMessage("<strong>Mouseover Event</strong><br/>Start: " + calEvent.start + "<br/>End: " + calEvent.end);
                },
                eventMouseout : function(calEvent, $event) {
                    displayMessage("<strong>Mouseout Event</strong><br/>Start: " + calEvent.start + "<br/>End: " + calEvent.end);
                },
                noEvents : function() {
                    displayMessage("There are no events for this week");
                },
                data:eventTest
            });

            function displayMessage(message) {
                $("#message").html(message).fadeIn();
            }

            $("<div id=\"message\" class=\"ui-corner-all\"></div>").prependTo($("body"));

        });
    </script>

</head>
<body class="container">

<div class="row">
    <div class="col-lg-10 col-lg-offset-1">
        <h1>Week Calendar Demo</h1>
        <p class="description">This calendar demonstrates a basic calendar. Events triggered are displayed in the message area. Appointments in the past are shaded grey.</p>
        <div id='calendar'></div>
    </div>
</div>








</body>
</html>